# Cloud IAM (Google Cloud Identity and Access Management)

誰（メンバー）がどのリソースに対するどのような権限（役割）を持っているかを定義、管理できる。

## 誰（メンバー）

### Googleアカウント
### サービスアカウント
アプリケーションに属するアカウント
https://support.google.com/cloud/answer/6158849#serviceaccounts

アプリが各GCPサービスにアクセスするために必要

公開鍵と秘密鍵のペアをP12ファイル or JSONファイルとして取得

秘密鍵はサーバ間のやりとりでOAuth2.0アクセストークンを要求する時に必要

### Googleグループ
個々のGoogleアカウントやサービスアカウントを束ねる

### G Suiteドメイン
1つの組織内のすべてのメンバーの仮想グループ

### Cloud Identityドメイン
1つの組織内のすべてのメンバーの仮想グループ

ただし、G Suiteアプリや機能へのアクセス不可

#### Cloud Identity
IDaasであり、企業向けモバイル管理（EMM）サービス

管理者は、ユーザー、アプリ、端末を一元管理

### allAuthenticatedUsers
Googleアカウントやサービスアカウントで認証されたすべてのユーザー

### allUsers
インターネット上の全員

## どのリソース
例…プロジェクト、Compute Engineインスタンス、Cloud Storageバケット

## どのような権限（役割）
通常、RESTメソッドと1:1対応

### 役割
権限のコレクション

権限をユーザーに直接割り当てることはできない

#### 基本の役割
- オーナー
- 編集者
- 閲覧者

#### 事前定義済みの役割
例:「パブリッシャー」=Pub/Subトピックにメッセージ送信可能な権限

#### カスタムの役割

### ポリシー
誰がどの種類のアクセス権を持つかを定義

リソースにアタッチされる

### ポリシー階層
GCPのリソースは階層別に編成されている

```
「組織」（ドメイン）
　　↓
  「フォルダー」（部署に相当）
  　　↓
    「GCPプロジェクト」
    　　↓
      「各GCPサービスのリソース」
```

- ポリシーは任意の階層で設定可能
- 親リソースのポリシーを継承
- ポリシー階層はリソース階層と同じパスに従う
- 親のポリシーを子のポリシーで制限できない！



