# Virtual Private Cloud（VPC）

GCP内のプライベート空間。
GCE, GKE, GAE(フレキシブル), プロジェクトの他のリソースを接続可能。

## 特性
- グローバルなリソース
- リージョンリソースとしてサブネットが存在
- サブネット毎にIPアドレス範囲を定義
- インスタンス間のトラフィックはファイアウォールルールで制御
- 共有VPCを使って、ホストプロジェクト内のリソースを他のサービスプロジェクトが利用可能
- 組織内に複数のネットワーク管理ドメインが存在したり、他の組織とピアリングを行う場合、VPCネットワークピアリングを使って、VPCネットワーク間をプライベートIP空間で接続可能
- 「自動モード」と「カスタムモード」の２種類のネットワーク

## IPアドレス
- インターネットと通信 or 他のネットワークリソースと通信する場合、外部IPアドレスの割り当て
- 「静的外部IPアドレス」は明示的に解放されるまでプロジェクトに長期的に割り当てられる
- 「エフェメラル外部IPアドレス」はVMの再起動やインスタンスの終了で解放される
- 内部IPアドレスにより同一ネットワーク内の他のリソースと通信

## ファイアウォールルール
- 暗黙の下り許可ルール（egress）：どのインスタンスからどの宛先にもトラフィック送信可能
- 暗黙の上り拒否ルール（ingress）：すべての受信トラフィックをブロック
- デフォルトの追加ルール：
    - ネットワーク内のインスタンス間ですべてのプロトコル・ポートの上り接続を許可
    - 任意の送信元から tcp:22 への上り接続を許可

## 内部DNS
- VPC内には内部DNSがあり、ネットワーク内のインスタンスを参照するときに内部IPアドレスでなく内部DNS名を使用可能

